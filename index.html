  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Family Memories</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      line-height: 1.5;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: #f4f4f7;
      color: #222;
    }

    header {
      position: relative;
      text-align: center;
      color: #fff;
      padding: 0;
      overflow: hidden;
    }
    .banner-container {
  max-width: 900px;   /* <‚Äî adjust smaller or larger */
  margin: 0 auto;     /* <‚Äî centers the banner */
  position: relative;
}

    .banner-image {
      width: 100%;
      max-height: 660px;
      object-fit: cover;
      display: block;
    }

    .banner-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.6));
    }

    .banner-text {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .banner-text h1 {
      font-size: clamp(2rem, 4vw, 3rem);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 0.3em;
    }

    .banner-text p {
      font-size: 1rem;
      opacity: 0.95;
    }

    nav {
      background: #ffffff;
      border-bottom: 1px solid #e4e4e8;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    nav ul {
      list-style: none;
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      padding: 0.75rem 1rem;
      flex-wrap: wrap;
    }

    nav a {
      text-decoration: none;
      color: #444;
      font-weight: 600;
      padding: 0.35rem 0.8rem;
      border-radius: 999px;
      transition: background 0.2s, color 0.2s, transform 0.1s;
    }

    nav a:hover {
      background: #406aff18;
      color: #2d4f9f;
      transform: translateY(-1px);
    }

    main {
      max-width: 1100px;
      margin: 1.5rem auto 3rem;
      padding: 0 1rem;
    }

    section {
      background: #ffffff;
      margin-bottom: 1.5rem;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.05);
    }

    section h2 {
      font-size: 1.5rem;
      margin-bottom: 0.75rem;
    }

    section p.section-intro {
      margin-bottom: 1rem;
      color: #555;
    }

    .media-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      margin-top: 0.5rem;
    }

    .media-card {
      background: #f9fafb;
      border-radius: 0.9rem;
      padding: 0.6rem;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }

    .media-card img,
    .media-card video {
      width: 100%;
      border-radius: 0.7rem;
      display: block;
    }

    .media-card iframe {
      width: 100%;
      aspect-ratio: 16 / 9;
      border-radius: 0.7rem;
    }

    .media-card span {
      font-size: 0.85rem;
      color: #555;
    }

    .upload-hint {
      font-size: 0.85rem;
      color: #777;
      margin-top: 0.75rem;
    }

    .file-input {
      margin-top: 0.5rem;
    }

    .comment-form {
      margin-top: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .comment-form input,
    .comment-form textarea {
      width: 100%;
      padding: 0.6rem 0.7rem;
      border-radius: 0.6rem;
      border: 1px solid #d0d4dd;
      font: inherit;
    }

    .comment-form textarea {
      min-height: 80px;
      resize: vertical;
    }

    .btn {
      align-self: flex-start;
      padding: 0.5rem 1.2rem;
      border-radius: 999px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      background: #315fe4;
      color: #fff;
      box-shadow: 0 6px 14px rgba(37, 99, 235, 0.25);
      transition: transform 0.08s, box-shadow 0.08s, opacity 0.2s;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    footer {
      text-align: center;
      font-size: 0.85rem;
      color: #777;
      padding-bottom: 2rem;
    }

    @media (max-width: 600px) {
      section {
        border-radius: 0.75rem;
        padding: 1.2rem;
      }
    }
  </style>
</head>

<body>
  <header class="banner-container">
    <!-- Use your own banner image file here -->
    <img src="banner.jpg" alt="Family Memories Banner" class="banner-image" />
    
  </header>

  <nav>
    <ul>
      <li><a href="#about">Home</a></li>
      <li><a href="#photos">Photos</a></li>
      <li><a href="#documents">Poems</a></li>
      <li><a href="#videos">Videos</a></li>
      <li><a href="#comments">Guestbook</a></li>
    </ul>
  </nav>

  <main>
    <section id="about">
      <h2>Welcome, Family &amp; Friends!</h2>
      <p class="section-intro">
        This little site is our spot for collecting stories, photos, and videos from all of our
        ‚ÄúHugga Hoops‚Äù adventures and family gatherings. Add your memories and say hi in the guestbook below.
        <a
  href="https://docs.google.com/document/d/e/2PACX-1vSwZ1al7qATtyqvm1PdZgEr2EaI6qrxxSqeBwIuwvxk1sEOpuwaan8eU4TFSOYUBQ/pub?embedded=true"
  target="_blank"
  rel="noopener"
  
>
  Hugga-Hoop Memory
</a>

      </p>
    </section>

    <!-- PHOTOS (Google Drive-powered gallery) -->
    <section id="photos">
  <h2>Photo Gallery</h2>
  <p class="section-intro">
    Photos in this gallery are stored in our shared Google Drive folder.
  </p>

  <!-- Always-visible gallery from Drive (no login required to view) -->
  <div class="media-card" style="padding: 0; overflow: hidden;">
    <iframe
      src="https://drive.google.com/embeddedfolderview?id=1Ep4A7YqTfClYusea7NamuR1FKO6aW7HK#grid"
      style="width: 100%; height: 480px; border: 0;"
    ></iframe>
  </div>
      <p style="margin-top: 0.5rem; font-size: 0.9rem;">
  View full folder:
  <a
    href="https://drive.google.com/drive/folders/1Ep4A7YqTfClYusea7NamuR1FKO6aW7HK"
    target="_blank"
    rel="noopener"
  >
    open in Google Drive
  </a>
</p>


  <p class="upload-hint" id="photoHint">
    To add photos, click the button below. You‚Äôll be asked to sign in with Google once.
  </p>

  <div style="margin-top:0.5rem; display:flex; flex-wrap:wrap; gap:0.5rem; align-items:center;">
    <button id="driveAddPhotos" class="btn">
      Add photos (Google login required)
    </button>
    <button id="driveSignout" class="btn" style="display:none; background:#9ca3af; box-shadow:none;">
      Sign out
    </button>
  </div>

  <!-- Hidden file input, opened by the button -->
  <input
    class="file-input"
    type="file"
    accept="image/*"
    multiple
    id="photoInput"
    style="display:none;"
  />
</section>

<section id="documents">
  <h2>Poems, Lyrics, and Other Writings</h2>
  <p class="section-intro">
    Download or view shared family documents (Poems, stories, and more).
  </p>

  <div class="media-card" style="padding: 0; overflow: hidden;">
    <iframe
      src="https://drive.google.com/embeddedfolderview?id=1feFodHcNSZa38XUx9lbt08HM2rjq2HsH#list"
      style="width: 100%; height: 280px; border: 0;"
    ></iframe>
  </div>

  <p class="upload-hint">
    To add documents to this list, upload them into the shared Google Drive folder.
  </p>
</section>


    <!-- VIDEOS (YouTube playlist + optional MP4) -->
    <section id="videos">
  <h2>Video Gallery</h2>
  <p class="section-intro">
    Enjoy videos in the Family and other playlists.</p>

  <div class="media-grid" id="videoGrid">
    <!-- Family playlist -->
    <div class="media-card">
      <iframe
        src="https://www.youtube.com/embed/videoseries?list=PLF0dSSzU0Xsg-JhzeJfeTHygpNXBfZf79"
        allowfullscreen
      ></iframe>
      <span>
  Our Family YouTube Playlist (<strong id="count-family">‚Ä¶</strong>) ‚Äì
  <a
    href="https://www.youtube.com/playlist?list=PLF0dSSzU0Xsg-JhzeJfeTHygpNXBfZf79"
    target="_blank"
    rel="noopener"
  >
    view on YouTube
  </a>
</span>

    </div>

    <!-- Joyce Remembrance playlist -->
    <div class="media-card">
      <iframe
        src="https://www.youtube.com/embed/videoseries?list=PLF0dSSzU0Xsj5HYHFoussGBqpDNba2AFE"
        allowfullscreen
      ></iframe>
      <span>
  Joyce Remembrance YouTube Playlist (<strong id="count-joyce">‚Ä¶</strong>) ‚Äì
  <a href="https://www.youtube.com/playlist?list=PLF0dSSzU0Xsj5HYHFoussGBqpDNba2AFE" target="_blank" rel="noopener">
    view on YouTube
  </a>
</span>

    </div>

    <!-- Sailing -->
    <div class="media-card">
      <iframe
        src="https://www.youtube.com/embed/videoseries?list=PLF0dSSzU0XsinmZS6ivlwJ2Tm2KYBLISf"
        allowfullscreen
      ></iframe>
      <span>
  My Sailing Adventures (<strong id="count-sailing">‚Ä¶</strong>) ‚Äì
  <a href="https://www.youtube.com/playlist?list=PLF0dSSzU0XsinmZS6ivlwJ2Tm2KYBLISf" target="_blank" rel="noopener">
    view on YouTube
  </a>
</span>

    </div>
    <!-- Christmas playlist -->
    <div class="media-card">
      <iframe
        src="https://www.youtube.com/embed/videoseries?list=PLF0dSSzU0XsjEnos5rCRk_2sTKRi6ZPM5"
        allowfullscreen
      ></iframe>
      <span>
  Christmas YouTube Playlist (<strong id="count-christmas">‚Ä¶</strong>) ‚Äì
  <a href="https://www.youtube.com/playlist?list=PLF0dSSzU0XsjEnos5rCRk_2sTKRi6ZPM5" target="_blank" rel="noopener">
    view on YouTube
  </a>
</span>

    </div>
  <!-- Birthdays -->
    <div class="media-card">
      <iframe
        src="https://www.youtube.com/embed/videoseries?list=PLF0dSSzU0Xsj9SP8xFEwM428yzceDJbjc"
        allowfullscreen
      ></iframe>
      <span>
  Birthday Songs (<strong id="count-bdays">‚Ä¶</strong>) ‚Äì
  <a href="https://www.youtube.com/playlist?list=PLF0dSSzU0Xsj9SP8xFEwM428yzceDJbjc" target="_blank" rel="noopener">
    view on YouTube
  </a>
</span>

    </div>
 <!-- Selected Songs and Poems -->
    <div class="media-card">
      <iframe
        src="https://www.youtube.com/embed/videoseries?list=PLF0dSSzU0XsjTdV_HaJeqYJJ4O4g6mvW-"
        allowfullscreen
      ></iframe>
      <span>
  Selected Songs and Poems (<strong id="count-selected">‚Ä¶</strong>) ‚Äì
  <a href="https://www.youtube.com/playlist?list=PLF0dSSzU0XsjTdV_HaJeqYJJ4O4g6mvW-" target="_blank" rel="noopener">
    view on YouTube
  </a>
</span>

    </div>
 
  </div>
</section>

    
<section id="comments">
      <h2>Guestbook &amp; Comments</h2>
      <p class="section-intro">
        Leave a note, a memory, or a shout-out for the family.
      </p>

      <form class="comment-form" id="commentForm">
        <input type="text" id="nameInput" placeholder="Your name" required />
        <textarea id="messageInput" placeholder="Your message" required></textarea>
        <button type="submit" class="btn">Post Comment</button>
      </form>

      <div class="comment-list" id="commentList"></div>
      <p class="upload-hint">
        
      </p>
    </section>
      </main>

  <footer>
    &copy; <span id="year"></span> Our Family. All hugs reserved.
  </footer>

  <!-- YEAR + COMMENTS VIA FIREBASE -->
<script type="module">
  // 1) IMPORT FIREBASE FROM CDN
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
  import {
    getFirestore,
    collection,
    addDoc,
    serverTimestamp,
    query,
    orderBy,
    onSnapshot
  } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

  // 2) YOUR FIREBASE CONFIG (replace with your actual config)
  const firebaseConfig = {
  apiKey: "AIzaSyBoHLyl_H6q4XRo6si-vdy1CnfNHOsVLD8",
  authDomain: "family-site-final.firebaseapp.com",
  projectId: "family-site-final",
  storageBucket: "family-site-final.firebasestorage.app",
  messagingSenderId: "31882408150",
  appId: "1:31882408150:web:25ca8ac52bd73ae4d25977"
};


  // 3) INITIALIZE FIREBASE + FIRESTORE
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const commentsCol = collection(db, "comments"); // Firestore collection name

  // 4) BASIC DOM HOOKS
  const yearSpan    = document.getElementById("year");
  const commentForm = document.getElementById("commentForm");
  const commentList = document.getElementById("commentList");

  if (yearSpan) {
    yearSpan.textContent = new Date().getFullYear();
  }

  // 5) RENDER A SINGLE COMMENT INTO THE DOM
  function addCommentToDOM(data) {
    if (!commentList) return;

    const div = document.createElement("div");
    div.className = "comment";

    const header = document.createElement("div");
    header.className = "comment-header";

    const nameSpan = document.createElement("span");
    nameSpan.textContent = data.name || "Anonymous";

    const dateSpan = document.createElement("span");
    dateSpan.className = "comment-date";
    if (data.date && data.date.toDate) {
      dateSpan.textContent = data.date.toDate().toLocaleString();
    } else {
      dateSpan.textContent = "";
    }

    header.appendChild(nameSpan);
    header.appendChild(dateSpan);

    const body = document.createElement("div");
    body.textContent = data.message;

    div.appendChild(header);
    div.appendChild(body);
    commentList.appendChild(div);
  }

  // 6) REAL-TIME LISTENER: LOAD COMMENTS FROM FIRESTORE (NEWEST FIRST)
  if (commentList) {
    const commentsQuery = query(commentsCol, orderBy("date", "desc"));

    onSnapshot(commentsQuery, (snapshot) => {
      commentList.innerHTML = "";
      snapshot.forEach((doc) => {
        addCommentToDOM(doc.data());
      });
    });
  }

  // 7) HANDLE NEW COMMENT SUBMISSION (SAVE TO FIRESTORE)
  if (commentForm) {
    commentForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const nameInput    = document.getElementById("nameInput");
      const messageInput = document.getElementById("messageInput");

      const name    = (nameInput.value || "").trim();
      const message = (messageInput.value || "").trim();

      if (!message) return;

      try {
        await addDoc(commentsCol, {
          name: name || "Anonymous",
          message,
          date: serverTimestamp()
        });

        commentForm.reset();
        // No need to manually reload; onSnapshot will update the list
      } catch (err) {
        console.error("Error adding comment:", err);
        alert("Sorry, there was a problem saving your comment.");
      }
    });
  }
</script>

  <!-- GOOGLE DRIVE PHOTO CODE -->
  <script>
  // üî¥ PUT YOUR REAL DRIVE VALUES HERE
  const CLIENT_ID = "220214661440-iqhbhncgbg34b6imeeha44pemj3pbf79.apps.googleusercontent.com";
  const API_KEY   = "AIzaSyBoHLyl_H6q4XRo6si-vdy1CnfNHOsVLD8";
  const FOLDER_ID = "1Ep4A7YqTfClYusea7NamuR1FKO6aW7HK"; // just the ID, not the whole URL

  const DISCOVERY_DOC = "https://www.googleapis.com/discovery/v1/apis/drive/v3/rest";
  const SCOPES        = "https://www.googleapis.com/auth/drive.file";

  let tokenClient;
  let gapiInited = false;
  let gisInited  = false;

  const addPhotosButton = document.getElementById("driveAddPhotos");
  const signoutButton   = document.getElementById("driveSignout");
  const photoInput      = document.getElementById("photoInput");
  const photoHint       = document.getElementById("photoHint");

  // Disable button until both libraries are ready
  addPhotosButton.disabled = true;

  function maybeEnableAddButton() {
    if (gapiInited && gisInited) {
      addPhotosButton.disabled = false;
    }
  }

  // Called when gapi script loads
  function gapiLoaded() {
    gapi.load("client", async () => {
      await gapi.client.init({
        apiKey: API_KEY,
        discoveryDocs: [DISCOVERY_DOC],
      });
      gapiInited = true;
      maybeEnableAddButton();
      // No need to list images here; iframe shows them
    });
  }

  // Called when Google Identity script loads
  function gisLoaded() {
    tokenClient = google.accounts.oauth2.initTokenClient({
      client_id: CLIENT_ID,
      scope: SCOPES,
      callback: "", // we set this when requesting a token
    });
    gisInited = true;
    maybeEnableAddButton();
  }

  // Main button: login if needed, then open file picker
  addPhotosButton.addEventListener("click", () => {
    const hasToken = !!gapi.client.getToken();

    const continueFlow = () => {
      photoHint.textContent = "Choose photos to upload. They will appear in the Drive gallery above.";
      signoutButton.style.display = "inline-block";
      photoInput.click();
    };

    if (!hasToken) {
      tokenClient.callback = async (resp) => {
        if (resp.error !== undefined) {
          console.error(resp);
          return;
        }
        continueFlow();
      };
      tokenClient.requestAccessToken({ prompt: "consent" });
    } else {
      continueFlow();
    }
  });

  // When files are chosen, upload them automatically
  photoInput.addEventListener("change", async () => {
    const files = Array.from(photoInput.files || []);
    if (!files.length) return;

    addPhotosButton.disabled = true;
    addPhotosButton.textContent = "Uploading...";

    try {
      for (const file of files) {
        await uploadFileToDrive(file);
      }
      alert("Upload complete! Refresh the page or the folder view to see new photos.");
    } catch (err) {
      console.error("Upload error:", err);
      alert("There was a problem uploading one or more photos.");
    } finally {
      photoInput.value = "";
      addPhotosButton.disabled = false;
      addPhotosButton.textContent = "Add photos (Google login required)";
    }
  });

  // Optional: sign out button
  signoutButton.addEventListener("click", () => {
    const token = gapi.client.getToken();
    if (token !== null) {
      google.accounts.oauth2.revoke(token.access_token);
      gapi.client.setToken("");
    }
    signoutButton.style.display = "none";
    photoHint.textContent = "To add photos, click the button below. You‚Äôll be asked to sign in with Google once.";
  });

  async function uploadFileToDrive(file) {
    const boundary  = "-------314159265358979323846";
    const delimiter = "\r\n--" + boundary + "\r\n";
    const closeDelim = "\r\n--" + boundary + "--";

    const metadata = {
      name: file.name,
      parents: [FOLDER_ID],
    };

    const reader = new FileReader();

    return new Promise((resolve, reject) => {
      reader.onload = async (e) => {
        const contentType = file.type || "application/octet-stream";
        const base64Data = btoa(
          new Uint8Array(e.target.result)
            .reduce((data, byte) => data + String.fromCharCode(byte), "")
        );

        const multipartRequestBody =
          delimiter +
          "Content-Type: application/json\r\n\r\n" +
          JSON.stringify(metadata) +
          delimiter +
          "Content-Type: " + contentType + "\r\n" +
          "Content-Transfer-Encoding: base64\r\n\r\n" +
          base64Data +
          closeDelim;

        try {
          const response = await gapi.client.request({
            path: "/upload/drive/v3/files",
            method: "POST",
            params: { uploadType: "multipart" },
            headers: { "Content-Type": "multipart/related; boundary=" + boundary },
            body: multipartRequestBody,
          });
          resolve(response.result);
        } catch (err) {
          reject(err);
        }
      };
      reader.onerror = reject;
      reader.readAsArrayBuffer(file);
    });
  }
</script>

  <!-- Google Identity + GAPI scripts -->
  <script src="https://accounts.google.com/gsi/client" async defer onload="gisLoaded()"></script>
  <script src="https://apis.google.com/js/api.js" async defer onload="gapiLoaded()"></script>
  <script>
  // Use the SAME API key you already have (must allow YouTube Data API v3)
  const YT_API_KEY = "AIzaSyBoHLyl_H6q4XRo6si-vdy1CnfNHOsVLD8";

  async function setPlaylistCount(playlistId, elementId) {
    const el = document.getElementById(elementId);
    if (!el) return;

    try {
      const url =
        "https://www.googleapis.com/youtube/v3/playlists" +
        `?part=contentDetails&id=${encodeURIComponent(playlistId)}` +
        `&key=${encodeURIComponent(YT_API_KEY)}`;

      const res = await fetch(url);
      const data = await res.json();
      const count = data?.items?.[0]?.contentDetails?.itemCount;

      el.textContent = Number.isInteger(count) ? `${count} videos` : "‚Äî";
    } catch (e) {
      el.textContent = "‚Äî";
    }
  }

 
    // üîΩ CALLS GO HERE
  setPlaylistCount("PLF0dSSzU0Xsg-JhzeJfeTHygpNXBfZf79", "count-family");
  setPlaylistCount("PLF0dSSzU0Xsj5HYHFoussGBqpDNba2AFE", "count-joyce");
  setPlaylistCount("PLF0dSSzU0XsjEnos5rCRk_2sTKRi6ZPM5", "count-christmas");
  setPlaylistCount("PLF0dSSzU0XsinmZS6ivlwJ2Tm2KYBLISf", "count-sailing");
  setPlaylistCount("PLF0dSSzU0Xsj9SP8xFEwM428yzceDJbjc", "count-bdays");
  setPlaylistCount("PLF0dSSzU0XsjTdV_HaJeqYJJ4O4g6mvW-", "count-selected");
</script>

</body>
</html>
